{"ast":null,"code":"import React,{useEffect,useState,useRef}from\"react\";import{useParams}from\"react-router-dom\";import{getThreadMessages,sendMessage}from\"../firebase/messages.js\";import{useAuth}from\"../firebase/AuthContext.jsx\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ViewThread(){const{threadId}=useParams();const{user}=useAuth();const[messages,setMessages]=useState([]);const[input,setInput]=useState(\"\");const bottomRef=useRef(null);useEffect(()=>{(async()=>{const msgs=await getThreadMessages(threadId);setMessages(msgs);setTimeout(()=>{var _bottomRef$current;return(_bottomRef$current=bottomRef.current)===null||_bottomRef$current===void 0?void 0:_bottomRef$current.scrollIntoView({behavior:\"smooth\"});},100);})();},[threadId]);const handleSend=async e=>{e.preventDefault();if(!input.trim())return;await sendMessage(threadId,user.uid,input);setInput(\"\");const msgs=await getThreadMessages(threadId);setMessages(msgs);setTimeout(()=>{var _bottomRef$current2;return(_bottomRef$current2=bottomRef.current)===null||_bottomRef$current2===void 0?void 0:_bottomRef$current2.scrollIntoView({behavior:\"smooth\"});},50);};return/*#__PURE__*/_jsxs(\"div\",{className:\"page fade-in\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Conversation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{padding:\"16px\",maxHeight:\"60vh\",overflowY:\"auto\",display:\"flex\",flexDirection:\"column\",gap:\"10px\",background:\"#f9fafb\"},children:[messages.map(m=>{const isMine=m.senderId===user.uid;return/*#__PURE__*/_jsxs(\"div\",{style:{alignSelf:isMine?\"flex-end\":\"flex-start\",maxWidth:\"75%\",background:isMine?\"var(--blue)\":\"#e5e7eb\",color:isMine?\"#ffffff\":\"#111827\",padding:\"8px 12px\",borderRadius:\"12px\",boxShadow:\"0 1px 3px rgba(15,23,42,0.15)\",fontSize:\"0.95rem\"},children:[m.text,/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"0.7rem\",opacity:0.65,marginTop:\"4px\"},children:new Date(m.createdAt).toLocaleString()})]},m.id);}),/*#__PURE__*/_jsx(\"div\",{ref:bottomRef})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSend,style:{marginTop:\"14px\",display:\"flex\",gap:\"8px\"},children:[/*#__PURE__*/_jsx(\"input\",{className:\"input\",placeholder:\"Type a message\\u2026\",value:input,onChange:e=>setInput(e.target.value),style:{flexGrow:1}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",style:{paddingInline:\"18px\"},children:\"Send\"})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","useParams","getThreadMessages","sendMessage","useAuth","jsx","_jsx","jsxs","_jsxs","ViewThread","threadId","user","messages","setMessages","input","setInput","bottomRef","msgs","setTimeout","_bottomRef$current","current","scrollIntoView","behavior","handleSend","e","preventDefault","trim","uid","_bottomRef$current2","className","children","style","padding","maxHeight","overflowY","display","flexDirection","gap","background","map","m","isMine","senderId","alignSelf","maxWidth","color","borderRadius","boxShadow","fontSize","text","opacity","marginTop","Date","createdAt","toLocaleString","id","ref","onSubmit","placeholder","value","onChange","target","flexGrow","paddingInline"],"sources":["C:/Users/Floyd/Desktop/Websites/HIAWTO/hi-awto-clean/src/pages/ViewThread.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { getThreadMessages, sendMessage } from \"../firebase/messages.js\";\r\nimport { useAuth } from \"../firebase/AuthContext.jsx\";\r\n\r\nexport default function ViewThread() {\r\n  const { threadId } = useParams();\r\n  const { user } = useAuth();\r\n\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const bottomRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const msgs = await getThreadMessages(threadId);\r\n      setMessages(msgs);\r\n      setTimeout(\r\n        () => bottomRef.current?.scrollIntoView({ behavior: \"smooth\" }),\r\n        100\r\n      );\r\n    })();\r\n  }, [threadId]);\r\n\r\n  const handleSend = async (e) => {\r\n    e.preventDefault();\r\n    if (!input.trim()) return;\r\n\r\n    await sendMessage(threadId, user.uid, input);\r\n    setInput(\"\");\r\n    const msgs = await getThreadMessages(threadId);\r\n    setMessages(msgs);\r\n\r\n    setTimeout(\r\n      () => bottomRef.current?.scrollIntoView({ behavior: \"smooth\" }),\r\n      50\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"page fade-in\">\r\n      <h1 className=\"page-title\">Conversation</h1>\r\n\r\n      {/* Messages */}\r\n      <div\r\n        className=\"card\"\r\n        style={{\r\n          padding: \"16px\",\r\n          maxHeight: \"60vh\",\r\n          overflowY: \"auto\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          gap: \"10px\",\r\n          background: \"#f9fafb\",\r\n        }}\r\n      >\r\n        {messages.map((m) => {\r\n          const isMine = m.senderId === user.uid;\r\n          return (\r\n            <div\r\n              key={m.id}\r\n              style={{\r\n                alignSelf: isMine ? \"flex-end\" : \"flex-start\",\r\n                maxWidth: \"75%\",\r\n                background: isMine ? \"var(--blue)\" : \"#e5e7eb\",\r\n                color: isMine ? \"#ffffff\" : \"#111827\",\r\n                padding: \"8px 12px\",\r\n                borderRadius: \"12px\",\r\n                boxShadow: \"0 1px 3px rgba(15,23,42,0.15)\",\r\n                fontSize: \"0.95rem\",\r\n              }}\r\n            >\r\n              {m.text}\r\n              <div\r\n                style={{\r\n                  fontSize: \"0.7rem\",\r\n                  opacity: 0.65,\r\n                  marginTop: \"4px\",\r\n                }}\r\n              >\r\n                {new Date(m.createdAt).toLocaleString()}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        <div ref={bottomRef}></div>\r\n      </div>\r\n\r\n      {/* Send Message */}\r\n      <form\r\n        onSubmit={handleSend}\r\n        style={{ marginTop: \"14px\", display: \"flex\", gap: \"8px\" }}\r\n      >\r\n        <input\r\n          className=\"input\"\r\n          placeholder=\"Type a messageâ€¦\"\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          style={{ flexGrow: 1 }}\r\n        />\r\n\r\n        <button className=\"btn btn-primary\" style={{ paddingInline: \"18px\" }}>\r\n          Send\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}