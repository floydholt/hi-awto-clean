{"ast":null,"code":"// src/firebase/uploadManager.js\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport { storage } from \"./config.js\";\n\n// Upload multiple listing images\nexport async function uploadListingImages(files) {\n  if (!files || files.length === 0) return [];\n  const uploads = files.map(async file => {\n    const path = `listingImages/${Date.now()}_${file.name}`;\n    const storageRef = ref(storage, path);\n    await uploadBytes(storageRef, file);\n    const url = await getDownloadURL(storageRef);\n    return url;\n  });\n  return Promise.all(uploads);\n}\n\n// Upload a single avatar image\nexport async function uploadAvatar(file) {\n  if (!file) return null;\n  const path = `avatars/${Date.now()}_${file.name}`;\n  const storageRef = ref(storage, path);\n  await uploadBytes(storageRef, file);\n  const url = await getDownloadURL(storageRef);\n  return url;\n}\n\n/**\r\n * Upload chat attachments for a thread.\r\n * @param {string} threadId\r\n * @param {File[]} files\r\n * @returns {Promise<Array<{url: string, contentType: string, name: string, size: number}>>}\r\n */\nexport async function uploadChatAttachments(threadId, files) {\n  if (!threadId || !files || files.length === 0) return [];\n  const uploads = files.map(async file => {\n    const safeName = file.name.replace(/\\s+/g, \"_\");\n    const path = `chatAttachments/${threadId}/${Date.now()}_${safeName}`;\n    const fileRef = ref(storage, path);\n    await uploadBytes(fileRef, file);\n    const url = await getDownloadURL(fileRef);\n    return {\n      url,\n      contentType: file.type || \"application/octet-stream\",\n      name: file.name,\n      size: file.size\n    };\n  });\n  return Promise.all(uploads);\n}","map":{"version":3,"names":["ref","uploadBytes","getDownloadURL","storage","uploadListingImages","files","length","uploads","map","file","path","Date","now","name","storageRef","url","Promise","all","uploadAvatar","uploadChatAttachments","threadId","safeName","replace","fileRef","contentType","type","size"],"sources":["C:/Users/Floyd/Desktop/Websites/HIAWTO/hi-awto-clean/src/firebase/uploadManager.js"],"sourcesContent":["// src/firebase/uploadManager.js\r\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\r\nimport { storage } from \"./config.js\";\r\n\r\n// Upload multiple listing images\r\nexport async function uploadListingImages(files) {\r\n  if (!files || files.length === 0) return [];\r\n\r\n  const uploads = files.map(async (file) => {\r\n    const path = `listingImages/${Date.now()}_${file.name}`;\r\n    const storageRef = ref(storage, path);\r\n    await uploadBytes(storageRef, file);\r\n    const url = await getDownloadURL(storageRef);\r\n    return url;\r\n  });\r\n\r\n  return Promise.all(uploads);\r\n}\r\n\r\n// Upload a single avatar image\r\nexport async function uploadAvatar(file) {\r\n  if (!file) return null;\r\n\r\n  const path = `avatars/${Date.now()}_${file.name}`;\r\n  const storageRef = ref(storage, path);\r\n  await uploadBytes(storageRef, file);\r\n  const url = await getDownloadURL(storageRef);\r\n  return url;\r\n}\r\n\r\n/**\r\n * Upload chat attachments for a thread.\r\n * @param {string} threadId\r\n * @param {File[]} files\r\n * @returns {Promise<Array<{url: string, contentType: string, name: string, size: number}>>}\r\n */\r\nexport async function uploadChatAttachments(threadId, files) {\r\n  if (!threadId || !files || files.length === 0) return [];\r\n\r\n  const uploads = files.map(async (file) => {\r\n    const safeName = file.name.replace(/\\s+/g, \"_\");\r\n    const path = `chatAttachments/${threadId}/${Date.now()}_${safeName}`;\r\n    const fileRef = ref(storage, path);\r\n\r\n    await uploadBytes(fileRef, file);\r\n    const url = await getDownloadURL(fileRef);\r\n\r\n    return {\r\n      url,\r\n      contentType: file.type || \"application/octet-stream\",\r\n      name: file.name,\r\n      size: file.size,\r\n    };\r\n  });\r\n\r\n  return Promise.all(uploads);\r\n}\r\n"],"mappings":"AAAA;AACA,SAASA,GAAG,EAAEC,WAAW,EAAEC,cAAc,QAAQ,kBAAkB;AACnE,SAASC,OAAO,QAAQ,aAAa;;AAErC;AACA,OAAO,eAAeC,mBAAmBA,CAACC,KAAK,EAAE;EAC/C,IAAI,CAACA,KAAK,IAAIA,KAAK,CAACC,MAAM,KAAK,CAAC,EAAE,OAAO,EAAE;EAE3C,MAAMC,OAAO,GAAGF,KAAK,CAACG,GAAG,CAAC,MAAOC,IAAI,IAAK;IACxC,MAAMC,IAAI,GAAG,iBAAiBC,IAAI,CAACC,GAAG,CAAC,CAAC,IAAIH,IAAI,CAACI,IAAI,EAAE;IACvD,MAAMC,UAAU,GAAGd,GAAG,CAACG,OAAO,EAAEO,IAAI,CAAC;IACrC,MAAMT,WAAW,CAACa,UAAU,EAAEL,IAAI,CAAC;IACnC,MAAMM,GAAG,GAAG,MAAMb,cAAc,CAACY,UAAU,CAAC;IAC5C,OAAOC,GAAG;EACZ,CAAC,CAAC;EAEF,OAAOC,OAAO,CAACC,GAAG,CAACV,OAAO,CAAC;AAC7B;;AAEA;AACA,OAAO,eAAeW,YAAYA,CAACT,IAAI,EAAE;EACvC,IAAI,CAACA,IAAI,EAAE,OAAO,IAAI;EAEtB,MAAMC,IAAI,GAAG,WAAWC,IAAI,CAACC,GAAG,CAAC,CAAC,IAAIH,IAAI,CAACI,IAAI,EAAE;EACjD,MAAMC,UAAU,GAAGd,GAAG,CAACG,OAAO,EAAEO,IAAI,CAAC;EACrC,MAAMT,WAAW,CAACa,UAAU,EAAEL,IAAI,CAAC;EACnC,MAAMM,GAAG,GAAG,MAAMb,cAAc,CAACY,UAAU,CAAC;EAC5C,OAAOC,GAAG;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,eAAeI,qBAAqBA,CAACC,QAAQ,EAAEf,KAAK,EAAE;EAC3D,IAAI,CAACe,QAAQ,IAAI,CAACf,KAAK,IAAIA,KAAK,CAACC,MAAM,KAAK,CAAC,EAAE,OAAO,EAAE;EAExD,MAAMC,OAAO,GAAGF,KAAK,CAACG,GAAG,CAAC,MAAOC,IAAI,IAAK;IACxC,MAAMY,QAAQ,GAAGZ,IAAI,CAACI,IAAI,CAACS,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC;IAC/C,MAAMZ,IAAI,GAAG,mBAAmBU,QAAQ,IAAIT,IAAI,CAACC,GAAG,CAAC,CAAC,IAAIS,QAAQ,EAAE;IACpE,MAAME,OAAO,GAAGvB,GAAG,CAACG,OAAO,EAAEO,IAAI,CAAC;IAElC,MAAMT,WAAW,CAACsB,OAAO,EAAEd,IAAI,CAAC;IAChC,MAAMM,GAAG,GAAG,MAAMb,cAAc,CAACqB,OAAO,CAAC;IAEzC,OAAO;MACLR,GAAG;MACHS,WAAW,EAAEf,IAAI,CAACgB,IAAI,IAAI,0BAA0B;MACpDZ,IAAI,EAAEJ,IAAI,CAACI,IAAI;MACfa,IAAI,EAAEjB,IAAI,CAACiB;IACb,CAAC;EACH,CAAC,CAAC;EAEF,OAAOV,OAAO,CAACC,GAAG,CAACV,OAAO,CAAC;AAC7B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}