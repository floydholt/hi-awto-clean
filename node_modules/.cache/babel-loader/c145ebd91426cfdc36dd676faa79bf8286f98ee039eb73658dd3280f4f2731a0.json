{"ast":null,"code":"// src/firebase/uploadManager.js\nimport{ref,uploadBytes,getDownloadURL}from\"firebase/storage\";import{storage,auth}from\"./config\";// Upload a single file with a path prefix\nexport async function uploadFile(file){let pathPrefix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"uploads\";if(!file)return null;const user=auth.currentUser;const uid=user?user.uid:\"anon\";const filename=\"\".concat(Date.now(),\"-\").concat(file.name);const fileRef=ref(storage,\"\".concat(pathPrefix,\"/\").concat(uid,\"/\").concat(filename));await uploadBytes(fileRef,file);const url=await getDownloadURL(fileRef);return{path:fileRef.fullPath,url};}// Upload multiple files\nexport async function uploadMultipleFiles(files){let pathPrefix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"uploads\";if(!files||files.length===0)return[];const out=[];for(const file of files){const uploaded=await uploadFile(file,pathPrefix);if(uploaded)out.push(uploaded);}return out;}// Listing images: returns array of URLs\nexport async function uploadListingImages(files){const uploads=await uploadMultipleFiles(files,\"listing-images\");return uploads.map(u=>u.url);}// Avatar upload: returns a single URL\nexport async function uploadAvatar(file){if(!file)return null;const uploaded=await uploadFile(file,\"avatars\");return(uploaded===null||uploaded===void 0?void 0:uploaded.url)||null;}","map":{"version":3,"names":["ref","uploadBytes","getDownloadURL","storage","auth","uploadFile","file","pathPrefix","arguments","length","undefined","user","currentUser","uid","filename","concat","Date","now","name","fileRef","url","path","fullPath","uploadMultipleFiles","files","out","uploaded","push","uploadListingImages","uploads","map","u","uploadAvatar"],"sources":["C:/Users/Floyd/Desktop/Websites/HIAWTO/hi-awto-clean/src/firebase/uploadManager.js"],"sourcesContent":["// src/firebase/uploadManager.js\r\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\r\nimport { storage, auth } from \"./config\";\r\n\r\n// Upload a single file with a path prefix\r\nexport async function uploadFile(file, pathPrefix = \"uploads\") {\r\n  if (!file) return null;\r\n\r\n  const user = auth.currentUser;\r\n  const uid = user ? user.uid : \"anon\";\r\n  const filename = `${Date.now()}-${file.name}`;\r\n  const fileRef = ref(storage, `${pathPrefix}/${uid}/${filename}`);\r\n\r\n  await uploadBytes(fileRef, file);\r\n  const url = await getDownloadURL(fileRef);\r\n\r\n  return { path: fileRef.fullPath, url };\r\n}\r\n\r\n// Upload multiple files\r\nexport async function uploadMultipleFiles(files, pathPrefix = \"uploads\") {\r\n  if (!files || files.length === 0) return [];\r\n  const out = [];\r\n  for (const file of files) {\r\n    const uploaded = await uploadFile(file, pathPrefix);\r\n    if (uploaded) out.push(uploaded);\r\n  }\r\n  return out;\r\n}\r\n\r\n// Listing images: returns array of URLs\r\nexport async function uploadListingImages(files) {\r\n  const uploads = await uploadMultipleFiles(files, \"listing-images\");\r\n  return uploads.map((u) => u.url);\r\n}\r\n\r\n// Avatar upload: returns a single URL\r\nexport async function uploadAvatar(file) {\r\n  if (!file) return null;\r\n  const uploaded = await uploadFile(file, \"avatars\");\r\n  return uploaded?.url || null;\r\n}\r\n"],"mappings":"AAAA;AACA,OAASA,GAAG,CAAEC,WAAW,CAAEC,cAAc,KAAQ,kBAAkB,CACnE,OAASC,OAAO,CAAEC,IAAI,KAAQ,UAAU,CAExC;AACA,MAAO,eAAe,CAAAC,UAAUA,CAACC,IAAI,CAA0B,IAAxB,CAAAC,UAAU,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,SAAS,CAC3D,GAAI,CAACF,IAAI,CAAE,MAAO,KAAI,CAEtB,KAAM,CAAAK,IAAI,CAAGP,IAAI,CAACQ,WAAW,CAC7B,KAAM,CAAAC,GAAG,CAAGF,IAAI,CAAGA,IAAI,CAACE,GAAG,CAAG,MAAM,CACpC,KAAM,CAAAC,QAAQ,IAAAC,MAAA,CAAMC,IAAI,CAACC,GAAG,CAAC,CAAC,MAAAF,MAAA,CAAIT,IAAI,CAACY,IAAI,CAAE,CAC7C,KAAM,CAAAC,OAAO,CAAGnB,GAAG,CAACG,OAAO,IAAAY,MAAA,CAAKR,UAAU,MAAAQ,MAAA,CAAIF,GAAG,MAAAE,MAAA,CAAID,QAAQ,CAAE,CAAC,CAEhE,KAAM,CAAAb,WAAW,CAACkB,OAAO,CAAEb,IAAI,CAAC,CAChC,KAAM,CAAAc,GAAG,CAAG,KAAM,CAAAlB,cAAc,CAACiB,OAAO,CAAC,CAEzC,MAAO,CAAEE,IAAI,CAAEF,OAAO,CAACG,QAAQ,CAAEF,GAAI,CAAC,CACxC,CAEA;AACA,MAAO,eAAe,CAAAG,mBAAmBA,CAACC,KAAK,CAA0B,IAAxB,CAAAjB,UAAU,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,SAAS,CACrE,GAAI,CAACgB,KAAK,EAAIA,KAAK,CAACf,MAAM,GAAK,CAAC,CAAE,MAAO,EAAE,CAC3C,KAAM,CAAAgB,GAAG,CAAG,EAAE,CACd,IAAK,KAAM,CAAAnB,IAAI,GAAI,CAAAkB,KAAK,CAAE,CACxB,KAAM,CAAAE,QAAQ,CAAG,KAAM,CAAArB,UAAU,CAACC,IAAI,CAAEC,UAAU,CAAC,CACnD,GAAImB,QAAQ,CAAED,GAAG,CAACE,IAAI,CAACD,QAAQ,CAAC,CAClC,CACA,MAAO,CAAAD,GAAG,CACZ,CAEA;AACA,MAAO,eAAe,CAAAG,mBAAmBA,CAACJ,KAAK,CAAE,CAC/C,KAAM,CAAAK,OAAO,CAAG,KAAM,CAAAN,mBAAmB,CAACC,KAAK,CAAE,gBAAgB,CAAC,CAClE,MAAO,CAAAK,OAAO,CAACC,GAAG,CAAEC,CAAC,EAAKA,CAAC,CAACX,GAAG,CAAC,CAClC,CAEA;AACA,MAAO,eAAe,CAAAY,YAAYA,CAAC1B,IAAI,CAAE,CACvC,GAAI,CAACA,IAAI,CAAE,MAAO,KAAI,CACtB,KAAM,CAAAoB,QAAQ,CAAG,KAAM,CAAArB,UAAU,CAACC,IAAI,CAAE,SAAS,CAAC,CAClD,MAAO,CAAAoB,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEN,GAAG,GAAI,IAAI,CAC9B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}