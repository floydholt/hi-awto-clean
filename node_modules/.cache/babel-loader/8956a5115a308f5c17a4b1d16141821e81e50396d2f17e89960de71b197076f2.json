{"ast":null,"code":"import _objectSpread from\"C:/Users/Floyd/Desktop/Websites/HIAWTO/hi-awto-clean/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/firebase/listings.js\nimport{collection,addDoc,doc,getDoc,getDocs,updateDoc,deleteDoc,query,where,orderBy,serverTimestamp}from\"firebase/firestore\";import{db,auth}from\"./config\";const LISTINGS_COL=\"listings\";// Map a Firestore document snapshot into a plain JS object\nfunction mapDoc(docSnap){if(!docSnap.exists())return null;return _objectSpread({id:docSnap.id},docSnap.data());}// -----------------------------------------------------\n// CREATE\n// -----------------------------------------------------\nexport async function createListing(data){const user=auth.currentUser;const ref=await addDoc(collection(db,LISTINGS_COL),_objectSpread(_objectSpread({},data),{},{ownerId:user?user.uid:null,createdAt:serverTimestamp(),updatedAt:serverTimestamp()}));const snap=await getDoc(ref);return mapDoc(snap);}// -----------------------------------------------------\n// READ – single listing\n// -----------------------------------------------------\nexport async function getListing(id){if(!id)return null;const ref=doc(db,LISTINGS_COL,id);const snap=await getDoc(ref);return mapDoc(snap);}// Backwards-compatible alias (in case any file still imports this)\nexport const getListingById=getListing;// -----------------------------------------------------\n// READ – all listings (for public browsing / homepage)\n// -----------------------------------------------------\nexport async function getAllListings(){const q=query(collection(db,LISTINGS_COL),orderBy(\"createdAt\",\"desc\"));const snap=await getDocs(q);return snap.docs.map(mapDoc);}// -----------------------------------------------------\n// READ – listings for the current user\n// -----------------------------------------------------\nexport async function getListingsForUser(userId){if(!userId)return[];const q=query(collection(db,LISTINGS_COL),where(\"ownerId\",\"==\",userId),orderBy(\"createdAt\",\"desc\"));const snap=await getDocs(q);return snap.docs.map(mapDoc);}// -----------------------------------------------------\n// UPDATE\n// -----------------------------------------------------\nexport async function updateListing(id,data){if(!id)throw new Error(\"Missing listing id for update\");const ref=doc(db,LISTINGS_COL,id);await updateDoc(ref,_objectSpread(_objectSpread({},data),{},{updatedAt:serverTimestamp()}));}// -----------------------------------------------------\n// DELETE\n// -----------------------------------------------------\nexport async function deleteListing(id){if(!id)return;const ref=doc(db,LISTINGS_COL,id);await deleteDoc(ref);}","map":{"version":3,"names":["collection","addDoc","doc","getDoc","getDocs","updateDoc","deleteDoc","query","where","orderBy","serverTimestamp","db","auth","LISTINGS_COL","mapDoc","docSnap","exists","_objectSpread","id","data","createListing","user","currentUser","ref","ownerId","uid","createdAt","updatedAt","snap","getListing","getListingById","getAllListings","q","docs","map","getListingsForUser","userId","updateListing","Error","deleteListing"],"sources":["C:/Users/Floyd/Desktop/Websites/HIAWTO/hi-awto-clean/src/firebase/listings.js"],"sourcesContent":["// src/firebase/listings.js\r\nimport {\r\n  collection,\r\n  addDoc,\r\n  doc,\r\n  getDoc,\r\n  getDocs,\r\n  updateDoc,\r\n  deleteDoc,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport { db, auth } from \"./config\";\r\n\r\nconst LISTINGS_COL = \"listings\";\r\n\r\n// Map a Firestore document snapshot into a plain JS object\r\nfunction mapDoc(docSnap) {\r\n  if (!docSnap.exists()) return null;\r\n  return { id: docSnap.id, ...docSnap.data() };\r\n}\r\n\r\n// -----------------------------------------------------\r\n// CREATE\r\n// -----------------------------------------------------\r\nexport async function createListing(data) {\r\n  const user = auth.currentUser;\r\n  const ref = await addDoc(collection(db, LISTINGS_COL), {\r\n    ...data,\r\n    ownerId: user ? user.uid : null,\r\n    createdAt: serverTimestamp(),\r\n    updatedAt: serverTimestamp(),\r\n  });\r\n\r\n  const snap = await getDoc(ref);\r\n  return mapDoc(snap);\r\n}\r\n\r\n// -----------------------------------------------------\r\n// READ – single listing\r\n// -----------------------------------------------------\r\nexport async function getListing(id) {\r\n  if (!id) return null;\r\n  const ref = doc(db, LISTINGS_COL, id);\r\n  const snap = await getDoc(ref);\r\n  return mapDoc(snap);\r\n}\r\n\r\n// Backwards-compatible alias (in case any file still imports this)\r\nexport const getListingById = getListing;\r\n\r\n// -----------------------------------------------------\r\n// READ – all listings (for public browsing / homepage)\r\n// -----------------------------------------------------\r\nexport async function getAllListings() {\r\n  const q = query(\r\n    collection(db, LISTINGS_COL),\r\n    orderBy(\"createdAt\", \"desc\")\r\n  );\r\n  const snap = await getDocs(q);\r\n  return snap.docs.map(mapDoc);\r\n}\r\n\r\n// -----------------------------------------------------\r\n// READ – listings for the current user\r\n// -----------------------------------------------------\r\nexport async function getListingsForUser(userId) {\r\n  if (!userId) return [];\r\n  const q = query(\r\n    collection(db, LISTINGS_COL),\r\n    where(\"ownerId\", \"==\", userId),\r\n    orderBy(\"createdAt\", \"desc\")\r\n  );\r\n  const snap = await getDocs(q);\r\n  return snap.docs.map(mapDoc);\r\n}\r\n\r\n// -----------------------------------------------------\r\n// UPDATE\r\n// -----------------------------------------------------\r\nexport async function updateListing(id, data) {\r\n  if (!id) throw new Error(\"Missing listing id for update\");\r\n  const ref = doc(db, LISTINGS_COL, id);\r\n  await updateDoc(ref, {\r\n    ...data,\r\n    updatedAt: serverTimestamp(),\r\n  });\r\n}\r\n\r\n// -----------------------------------------------------\r\n// DELETE\r\n// -----------------------------------------------------\r\nexport async function deleteListing(id) {\r\n  if (!id) return;\r\n  const ref = doc(db, LISTINGS_COL, id);\r\n  await deleteDoc(ref);\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}