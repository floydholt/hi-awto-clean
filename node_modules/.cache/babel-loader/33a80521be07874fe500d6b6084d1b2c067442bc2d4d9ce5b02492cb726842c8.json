{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { collection, query, where, onSnapshot } from \"firebase/firestore\";\nimport { db } from \"../firebase/config\";\nexport default function useUnreadMessages(userId) {\n  _s();\n  const [count, setCount] = useState(0);\n  useEffect(() => {\n    if (!userId) {\n      setCount(0);\n      return;\n    }\n    const q = query(collection(db, \"messages\"), where(\"recipientId\", \"==\", userId), where(\"read\", \"==\", false));\n    const unsub = onSnapshot(q, snap => {\n      setCount(snap.size || 0);\n    });\n    return unsub;\n  }, [userId]);\n  return count;\n}\n_s(useUnreadMessages, \"/xL7qdScToREtqzbt5GZ1kHtYjQ=\");","map":{"version":3,"names":["useEffect","useState","collection","query","where","onSnapshot","db","useUnreadMessages","userId","_s","count","setCount","q","unsub","snap","size"],"sources":["C:/Users/Floyd/Desktop/Websites/HIAWTO/hi-awto-clean/src/hooks/useUnreadMessages.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport {\r\n  collection,\r\n  query,\r\n  where,\r\n  onSnapshot,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"../firebase/config\";\r\n\r\nexport default function useUnreadMessages(userId) {\r\n  const [count, setCount] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (!userId) {\r\n      setCount(0);\r\n      return;\r\n    }\r\n\r\n    const q = query(\r\n      collection(db, \"messages\"),\r\n      where(\"recipientId\", \"==\", userId),\r\n      where(\"read\", \"==\", false)\r\n    );\r\n\r\n    const unsub = onSnapshot(q, (snap) => {\r\n      setCount(snap.size || 0);\r\n    });\r\n\r\n    return unsub;\r\n  }, [userId]);\r\n\r\n  return count;\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SACEC,UAAU,EACVC,KAAK,EACLC,KAAK,EACLC,UAAU,QACL,oBAAoB;AAC3B,SAASC,EAAE,QAAQ,oBAAoB;AAEvC,eAAe,SAASC,iBAAiBA,CAACC,MAAM,EAAE;EAAAC,EAAA;EAChD,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAAC,CAAC,CAAC;EAErCD,SAAS,CAAC,MAAM;IACd,IAAI,CAACQ,MAAM,EAAE;MACXG,QAAQ,CAAC,CAAC,CAAC;MACX;IACF;IAEA,MAAMC,CAAC,GAAGT,KAAK,CACbD,UAAU,CAACI,EAAE,EAAE,UAAU,CAAC,EAC1BF,KAAK,CAAC,aAAa,EAAE,IAAI,EAAEI,MAAM,CAAC,EAClCJ,KAAK,CAAC,MAAM,EAAE,IAAI,EAAE,KAAK,CAC3B,CAAC;IAED,MAAMS,KAAK,GAAGR,UAAU,CAACO,CAAC,EAAGE,IAAI,IAAK;MACpCH,QAAQ,CAACG,IAAI,CAACC,IAAI,IAAI,CAAC,CAAC;IAC1B,CAAC,CAAC;IAEF,OAAOF,KAAK;EACd,CAAC,EAAE,CAACL,MAAM,CAAC,CAAC;EAEZ,OAAOE,KAAK;AACd;AAACD,EAAA,CAvBuBF,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}