{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import{useAuth}from\"../firebase/AuthContext.jsx\";import{getListingsForUser,deleteListing}from\"../firebase/listings.js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MyListings(){const{user}=useAuth();const[listings,setListings]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{if(!user)return;(async()=>{const data=await getListingsForUser(user.uid);setListings(data);setLoading(false);})();},[user]);if(!user)return/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:\"Please login to view your listings.\"});const handleDelete=async id=>{if(!window.confirm(\"Delete this listing?\"))return;await deleteListing(id);setListings(prev=>prev.filter(l=>l.id!==id));};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 max-w-3xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"My Listings\"}),/*#__PURE__*/_jsx(Link,{to:\"/create-listing\",className:\"text-blue-600\",children:\"+ New Listing\"})]}),loading&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),!loading&&listings.length===0&&/*#__PURE__*/_jsx(\"div\",{children:\"You haven't created any listings yet.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:listings.map(l=>/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded p-3 flex justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:l.title}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:l.address})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 items-center\",children:[/*#__PURE__*/_jsx(Link,{to:\"/listing/\".concat(l.id),className:\"text-blue-600 text-sm hover:underline\",children:\"View\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(l.id),className:\"text-red-600 text-sm\",children:\"Delete\"})]})]},l.id))})]});}","map":{"version":3,"names":["React","useEffect","useState","Link","useAuth","getListingsForUser","deleteListing","jsx","_jsx","jsxs","_jsxs","MyListings","user","listings","setListings","loading","setLoading","data","uid","className","children","handleDelete","id","window","confirm","prev","filter","l","to","length","map","title","address","concat","onClick"],"sources":["C:/Users/Floyd/Desktop/Websites/HIAWTO/hi-awto-clean/src/pages/MyListings.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useAuth } from \"../firebase/AuthContext.jsx\";\r\nimport { getListingsForUser, deleteListing } from \"../firebase/listings.js\";\r\n\r\nexport default function MyListings() {\r\n  const { user } = useAuth();\r\n  const [listings, setListings] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!user) return;\r\n\r\n    (async () => {\r\n      const data = await getListingsForUser(user.uid);\r\n      setListings(data);\r\n      setLoading(false);\r\n    })();\r\n  }, [user]);\r\n\r\n  if (!user) return <div className=\"p-4\">Please login to view your listings.</div>;\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(\"Delete this listing?\")) return;\r\n    await deleteListing(id);\r\n    setListings((prev) => prev.filter((l) => l.id !== id));\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 max-w-3xl mx-auto\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h1 className=\"text-2xl font-bold\">My Listings</h1>\r\n        <Link to=\"/create-listing\" className=\"text-blue-600\">\r\n          + New Listing\r\n        </Link>\r\n      </div>\r\n\r\n      {loading && <div>Loading...</div>}\r\n\r\n      {!loading && listings.length === 0 && (\r\n        <div>You haven&apos;t created any listings yet.</div>\r\n      )}\r\n\r\n      <div className=\"space-y-3\">\r\n        {listings.map((l) => (\r\n          <div key={l.id} className=\"border rounded p-3 flex justify-between\">\r\n            <div>\r\n              <div className=\"font-semibold\">{l.title}</div>\r\n              <div className=\"text-sm text-gray-600\">{l.address}</div>\r\n            </div>\r\n            <div className=\"flex gap-2 items-center\">\r\n              <Link\r\n                to={`/listing/${l.id}`}\r\n                className=\"text-blue-600 text-sm hover:underline\"\r\n              >\r\n                View\r\n              </Link>\r\n              <button\r\n                onClick={() => handleDelete(l.id)}\r\n                className=\"text-red-600 text-sm\"\r\n              >\r\n                Delete\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}