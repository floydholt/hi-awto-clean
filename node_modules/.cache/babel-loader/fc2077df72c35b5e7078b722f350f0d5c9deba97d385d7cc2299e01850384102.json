{"ast":null,"code":"// src/firebase/uploadManager.js\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport { storage, auth } from \"./config\";\n\n// Upload a single file with a path prefix\nexport async function uploadFile(file, pathPrefix = \"uploads\") {\n  if (!file) return null;\n  const user = auth.currentUser;\n  const uid = user ? user.uid : \"anon\";\n  const filename = `${Date.now()}-${file.name}`;\n  const fileRef = ref(storage, `${pathPrefix}/${uid}/${filename}`);\n  await uploadBytes(fileRef, file);\n  const url = await getDownloadURL(fileRef);\n  return {\n    path: fileRef.fullPath,\n    url\n  };\n}\n\n// Upload multiple files\nexport async function uploadMultipleFiles(files, pathPrefix = \"uploads\") {\n  if (!files || files.length === 0) return [];\n  const out = [];\n  for (const file of files) {\n    const uploaded = await uploadFile(file, pathPrefix);\n    if (uploaded) out.push(uploaded);\n  }\n  return out;\n}\n\n// Listing images: returns array of URLs\nexport async function uploadListingImages(files) {\n  const uploads = await uploadMultipleFiles(files, \"listing-images\");\n  return uploads.map(u => u.url);\n}\n\n// Avatar upload: returns a single URL\nexport async function uploadAvatar(file) {\n  if (!file) return null;\n  const uploaded = await uploadFile(file, \"avatars\");\n  return (uploaded === null || uploaded === void 0 ? void 0 : uploaded.url) || null;\n}","map":{"version":3,"names":["ref","uploadBytes","getDownloadURL","storage","auth","uploadFile","file","pathPrefix","user","currentUser","uid","filename","Date","now","name","fileRef","url","path","fullPath","uploadMultipleFiles","files","length","out","uploaded","push","uploadListingImages","uploads","map","u","uploadAvatar"],"sources":["C:/Users/Floyd/Desktop/Websites/HIAWTO/hi-awto-clean/src/firebase/uploadManager.js"],"sourcesContent":["// src/firebase/uploadManager.js\r\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\r\nimport { storage, auth } from \"./config\";\r\n\r\n// Upload a single file with a path prefix\r\nexport async function uploadFile(file, pathPrefix = \"uploads\") {\r\n  if (!file) return null;\r\n\r\n  const user = auth.currentUser;\r\n  const uid = user ? user.uid : \"anon\";\r\n  const filename = `${Date.now()}-${file.name}`;\r\n  const fileRef = ref(storage, `${pathPrefix}/${uid}/${filename}`);\r\n\r\n  await uploadBytes(fileRef, file);\r\n  const url = await getDownloadURL(fileRef);\r\n\r\n  return { path: fileRef.fullPath, url };\r\n}\r\n\r\n// Upload multiple files\r\nexport async function uploadMultipleFiles(files, pathPrefix = \"uploads\") {\r\n  if (!files || files.length === 0) return [];\r\n  const out = [];\r\n  for (const file of files) {\r\n    const uploaded = await uploadFile(file, pathPrefix);\r\n    if (uploaded) out.push(uploaded);\r\n  }\r\n  return out;\r\n}\r\n\r\n// Listing images: returns array of URLs\r\nexport async function uploadListingImages(files) {\r\n  const uploads = await uploadMultipleFiles(files, \"listing-images\");\r\n  return uploads.map((u) => u.url);\r\n}\r\n\r\n// Avatar upload: returns a single URL\r\nexport async function uploadAvatar(file) {\r\n  if (!file) return null;\r\n  const uploaded = await uploadFile(file, \"avatars\");\r\n  return uploaded?.url || null;\r\n}\r\n"],"mappings":"AAAA;AACA,SAASA,GAAG,EAAEC,WAAW,EAAEC,cAAc,QAAQ,kBAAkB;AACnE,SAASC,OAAO,EAAEC,IAAI,QAAQ,UAAU;;AAExC;AACA,OAAO,eAAeC,UAAUA,CAACC,IAAI,EAAEC,UAAU,GAAG,SAAS,EAAE;EAC7D,IAAI,CAACD,IAAI,EAAE,OAAO,IAAI;EAEtB,MAAME,IAAI,GAAGJ,IAAI,CAACK,WAAW;EAC7B,MAAMC,GAAG,GAAGF,IAAI,GAAGA,IAAI,CAACE,GAAG,GAAG,MAAM;EACpC,MAAMC,QAAQ,GAAG,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,IAAIP,IAAI,CAACQ,IAAI,EAAE;EAC7C,MAAMC,OAAO,GAAGf,GAAG,CAACG,OAAO,EAAE,GAAGI,UAAU,IAAIG,GAAG,IAAIC,QAAQ,EAAE,CAAC;EAEhE,MAAMV,WAAW,CAACc,OAAO,EAAET,IAAI,CAAC;EAChC,MAAMU,GAAG,GAAG,MAAMd,cAAc,CAACa,OAAO,CAAC;EAEzC,OAAO;IAAEE,IAAI,EAAEF,OAAO,CAACG,QAAQ;IAAEF;EAAI,CAAC;AACxC;;AAEA;AACA,OAAO,eAAeG,mBAAmBA,CAACC,KAAK,EAAEb,UAAU,GAAG,SAAS,EAAE;EACvE,IAAI,CAACa,KAAK,IAAIA,KAAK,CAACC,MAAM,KAAK,CAAC,EAAE,OAAO,EAAE;EAC3C,MAAMC,GAAG,GAAG,EAAE;EACd,KAAK,MAAMhB,IAAI,IAAIc,KAAK,EAAE;IACxB,MAAMG,QAAQ,GAAG,MAAMlB,UAAU,CAACC,IAAI,EAAEC,UAAU,CAAC;IACnD,IAAIgB,QAAQ,EAAED,GAAG,CAACE,IAAI,CAACD,QAAQ,CAAC;EAClC;EACA,OAAOD,GAAG;AACZ;;AAEA;AACA,OAAO,eAAeG,mBAAmBA,CAACL,KAAK,EAAE;EAC/C,MAAMM,OAAO,GAAG,MAAMP,mBAAmB,CAACC,KAAK,EAAE,gBAAgB,CAAC;EAClE,OAAOM,OAAO,CAACC,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACZ,GAAG,CAAC;AAClC;;AAEA;AACA,OAAO,eAAea,YAAYA,CAACvB,IAAI,EAAE;EACvC,IAAI,CAACA,IAAI,EAAE,OAAO,IAAI;EACtB,MAAMiB,QAAQ,GAAG,MAAMlB,UAAU,CAACC,IAAI,EAAE,SAAS,CAAC;EAClD,OAAO,CAAAiB,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEP,GAAG,KAAI,IAAI;AAC9B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}