{"ast":null,"code":"// src/firebase/uploadManager.js\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport { storage } from \"./config\";\n\n/**\r\n * Upload a single File to Firebase Storage under /listings/\r\n * and return its download URL.\r\n */\nexport async function uploadListingImage(file) {\n  if (!file) return null;\n  const safeName = file.name.replace(/\\s+/g, \"_\");\n  const uniqueId = `${Date.now()}-${Math.random().toString(36).slice(2, 8)}`;\n  const storagePath = `listings/${uniqueId}-${safeName}`;\n  const storageRef = ref(storage, storagePath);\n  const snap = await uploadBytes(storageRef, file);\n  const url = await getDownloadURL(snap.ref);\n  return url;\n}\n\n/**\r\n * Upload multiple images and return an array of download URLs.\r\n */\nexport async function uploadListingImages(files) {\n  if (!files || files.length === 0) return [];\n  const uploads = Array.from(files).map(file => uploadListingImage(file));\n  const urls = await Promise.all(uploads);\n  // Filter out any nulls just in case\n  return urls.filter(Boolean);\n}","map":{"version":3,"names":["ref","uploadBytes","getDownloadURL","storage","uploadListingImage","file","safeName","name","replace","uniqueId","Date","now","Math","random","toString","slice","storagePath","storageRef","snap","url","uploadListingImages","files","length","uploads","Array","from","map","urls","Promise","all","filter","Boolean"],"sources":["C:/Users/Floyd/Desktop/Websites/HIAWTO/hi-awto-clean/src/firebase/uploadManager.js"],"sourcesContent":["// src/firebase/uploadManager.js\r\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\r\nimport { storage } from \"./config\";\r\n\r\n/**\r\n * Upload a single File to Firebase Storage under /listings/\r\n * and return its download URL.\r\n */\r\nexport async function uploadListingImage(file) {\r\n  if (!file) return null;\r\n\r\n  const safeName = file.name.replace(/\\s+/g, \"_\");\r\n  const uniqueId = `${Date.now()}-${Math.random().toString(36).slice(2, 8)}`;\r\n  const storagePath = `listings/${uniqueId}-${safeName}`;\r\n\r\n  const storageRef = ref(storage, storagePath);\r\n  const snap = await uploadBytes(storageRef, file);\r\n  const url = await getDownloadURL(snap.ref);\r\n\r\n  return url;\r\n}\r\n\r\n/**\r\n * Upload multiple images and return an array of download URLs.\r\n */\r\nexport async function uploadListingImages(files) {\r\n  if (!files || files.length === 0) return [];\r\n\r\n  const uploads = Array.from(files).map((file) => uploadListingImage(file));\r\n  const urls = await Promise.all(uploads);\r\n  // Filter out any nulls just in case\r\n  return urls.filter(Boolean);\r\n}\r\n"],"mappings":"AAAA;AACA,SAASA,GAAG,EAAEC,WAAW,EAAEC,cAAc,QAAQ,kBAAkB;AACnE,SAASC,OAAO,QAAQ,UAAU;;AAElC;AACA;AACA;AACA;AACA,OAAO,eAAeC,kBAAkBA,CAACC,IAAI,EAAE;EAC7C,IAAI,CAACA,IAAI,EAAE,OAAO,IAAI;EAEtB,MAAMC,QAAQ,GAAGD,IAAI,CAACE,IAAI,CAACC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC;EAC/C,MAAMC,QAAQ,GAAG,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,IAAIC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;EAC1E,MAAMC,WAAW,GAAG,YAAYP,QAAQ,IAAIH,QAAQ,EAAE;EAEtD,MAAMW,UAAU,GAAGjB,GAAG,CAACG,OAAO,EAAEa,WAAW,CAAC;EAC5C,MAAME,IAAI,GAAG,MAAMjB,WAAW,CAACgB,UAAU,EAAEZ,IAAI,CAAC;EAChD,MAAMc,GAAG,GAAG,MAAMjB,cAAc,CAACgB,IAAI,CAAClB,GAAG,CAAC;EAE1C,OAAOmB,GAAG;AACZ;;AAEA;AACA;AACA;AACA,OAAO,eAAeC,mBAAmBA,CAACC,KAAK,EAAE;EAC/C,IAAI,CAACA,KAAK,IAAIA,KAAK,CAACC,MAAM,KAAK,CAAC,EAAE,OAAO,EAAE;EAE3C,MAAMC,OAAO,GAAGC,KAAK,CAACC,IAAI,CAACJ,KAAK,CAAC,CAACK,GAAG,CAAErB,IAAI,IAAKD,kBAAkB,CAACC,IAAI,CAAC,CAAC;EACzE,MAAMsB,IAAI,GAAG,MAAMC,OAAO,CAACC,GAAG,CAACN,OAAO,CAAC;EACvC;EACA,OAAOI,IAAI,CAACG,MAAM,CAACC,OAAO,CAAC;AAC7B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}