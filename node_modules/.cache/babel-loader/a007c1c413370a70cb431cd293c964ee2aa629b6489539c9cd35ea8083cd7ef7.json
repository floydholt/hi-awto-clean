{"ast":null,"code":"import { collection, query, where, getDocs } from \"firebase/firestore\";\nimport { db } from \"./config\";\nexport async function searchListingsAI(text) {\n  const all = await getDocs(collection(db, \"listings\"));\n  const listings = all.docs.map(d => ({\n    id: d.id,\n    ...d.data()\n  }));\n  const queryLower = text.toLowerCase();\n\n  // Search by:\n  // - title\n  // - description\n  // - aiTags\n  // - aiCaption\n  return listings.filter(l => {\n    return l.title && l.title.toLowerCase().includes(queryLower) || l.description && l.description.toLowerCase().includes(queryLower) || l.aiCaption && l.aiCaption.toLowerCase().includes(queryLower) || Array.isArray(l.aiTags) && l.aiTags.some(tag => tag.toLowerCase().includes(queryLower));\n  });\n}","map":{"version":3,"names":["collection","query","where","getDocs","db","searchListingsAI","text","all","listings","docs","map","d","id","data","queryLower","toLowerCase","filter","l","title","includes","description","aiCaption","Array","isArray","aiTags","some","tag"],"sources":["C:/Users/Floyd/Desktop/Websites/HIAWTO/hi-awto-clean/src/firebase/searchAI.js"],"sourcesContent":["import { collection, query, where, getDocs } from \"firebase/firestore\";\r\nimport { db } from \"./config\";\r\n\r\nexport async function searchListingsAI(text) {\r\n  const all = await getDocs(collection(db, \"listings\"));\r\n  const listings = all.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n\r\n  const queryLower = text.toLowerCase();\r\n\r\n  // Search by:\r\n  // - title\r\n  // - description\r\n  // - aiTags\r\n  // - aiCaption\r\n  return listings.filter((l) => {\r\n    return (\r\n      (l.title && l.title.toLowerCase().includes(queryLower)) ||\r\n      (l.description && l.description.toLowerCase().includes(queryLower)) ||\r\n      (l.aiCaption && l.aiCaption.toLowerCase().includes(queryLower)) ||\r\n      (Array.isArray(l.aiTags) &&\r\n        l.aiTags.some((tag) => tag.toLowerCase().includes(queryLower)))\r\n    );\r\n  });\r\n}\r\n"],"mappings":"AAAA,SAASA,UAAU,EAAEC,KAAK,EAAEC,KAAK,EAAEC,OAAO,QAAQ,oBAAoB;AACtE,SAASC,EAAE,QAAQ,UAAU;AAE7B,OAAO,eAAeC,gBAAgBA,CAACC,IAAI,EAAE;EAC3C,MAAMC,GAAG,GAAG,MAAMJ,OAAO,CAACH,UAAU,CAACI,EAAE,EAAE,UAAU,CAAC,CAAC;EACrD,MAAMI,QAAQ,GAAGD,GAAG,CAACE,IAAI,CAACC,GAAG,CAAEC,CAAC,KAAM;IAAEC,EAAE,EAAED,CAAC,CAACC,EAAE;IAAE,GAAGD,CAAC,CAACE,IAAI,CAAC;EAAE,CAAC,CAAC,CAAC;EAEjE,MAAMC,UAAU,GAAGR,IAAI,CAACS,WAAW,CAAC,CAAC;;EAErC;EACA;EACA;EACA;EACA;EACA,OAAOP,QAAQ,CAACQ,MAAM,CAAEC,CAAC,IAAK;IAC5B,OACGA,CAAC,CAACC,KAAK,IAAID,CAAC,CAACC,KAAK,CAACH,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,UAAU,CAAC,IACrDG,CAAC,CAACG,WAAW,IAAIH,CAAC,CAACG,WAAW,CAACL,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,UAAU,CAAE,IAClEG,CAAC,CAACI,SAAS,IAAIJ,CAAC,CAACI,SAAS,CAACN,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,UAAU,CAAE,IAC9DQ,KAAK,CAACC,OAAO,CAACN,CAAC,CAACO,MAAM,CAAC,IACtBP,CAAC,CAACO,MAAM,CAACC,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACX,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,UAAU,CAAC,CAAE;EAErE,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}