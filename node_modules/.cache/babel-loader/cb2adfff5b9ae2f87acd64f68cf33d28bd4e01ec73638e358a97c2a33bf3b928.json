{"ast":null,"code":"import { onAuthStateChanged } from \"firebase/auth\";\nimport { auth } from \"./auth\";\nimport { getIdTokenResult } from \"firebase/auth\";\nuseEffect(() => {\n  const unsub = onAuthStateChanged(auth, async user => {\n    if (user) {\n      const token = await getIdTokenResult(user);\n      setRole(token.claims.admin ? \"admin\" : \"user\");\n      setUser(user);\n    } else {\n      setUser(null);\n      setRole(null);\n    }\n  });\n  return () => unsub();\n}, []);","map":{"version":3,"names":["onAuthStateChanged","auth","getIdTokenResult","useEffect","unsub","user","token","setRole","claims","admin","setUser"],"sources":["C:/Users/Floyd/Desktop/Websites/HIAWTO/hi-awto-clean/src/firebase/AuthContext.jsx"],"sourcesContent":["import { onAuthStateChanged } from \"firebase/auth\";\r\nimport { auth } from \"./auth\";\r\nimport { getIdTokenResult } from \"firebase/auth\";\r\n\r\nuseEffect(() => {\r\n  const unsub = onAuthStateChanged(auth, async (user) => {\r\n    if (user) {\r\n      const token = await getIdTokenResult(user);\r\n      setRole(token.claims.admin ? \"admin\" : \"user\");\r\n      setUser(user);\r\n    } else {\r\n      setUser(null);\r\n      setRole(null);\r\n    }\r\n  });\r\n\r\n  return () => unsub();\r\n}, []);\r\n"],"mappings":"AAAA,SAASA,kBAAkB,QAAQ,eAAe;AAClD,SAASC,IAAI,QAAQ,QAAQ;AAC7B,SAASC,gBAAgB,QAAQ,eAAe;AAEhDC,SAAS,CAAC,MAAM;EACd,MAAMC,KAAK,GAAGJ,kBAAkB,CAACC,IAAI,EAAE,MAAOI,IAAI,IAAK;IACrD,IAAIA,IAAI,EAAE;MACR,MAAMC,KAAK,GAAG,MAAMJ,gBAAgB,CAACG,IAAI,CAAC;MAC1CE,OAAO,CAACD,KAAK,CAACE,MAAM,CAACC,KAAK,GAAG,OAAO,GAAG,MAAM,CAAC;MAC9CC,OAAO,CAACL,IAAI,CAAC;IACf,CAAC,MAAM;MACLK,OAAO,CAAC,IAAI,CAAC;MACbH,OAAO,CAAC,IAAI,CAAC;IACf;EACF,CAAC,CAAC;EAEF,OAAO,MAAMH,KAAK,CAAC,CAAC;AACtB,CAAC,EAAE,EAAE,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}