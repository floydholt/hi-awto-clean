{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Floyd\\\\Desktop\\\\Websites\\\\HIAWTO\\\\hi-awto-clean\\\\src\\\\pages\\\\ViewThread.jsx\",\n  _s = $RefreshSig$();\n// src/pages/ViewThread.jsx\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { useAuth } from \"../firebase/AuthContext.jsx\";\nimport { getThread, getThreadMessages, sendMessage, setThreadTyping, markThreadMessagesRead } from \"../firebase/messages.js\";\nimport { db } from \"../firebase/config.js\";\nimport { doc, onSnapshot } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ViewThread() {\n  _s();\n  const {\n    threadId\n  } = useParams();\n  const {\n    user\n  } = useAuth();\n  const [thread, setThread] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [sending, setSending] = useState(false);\n  const [newMessage, setNewMessage] = useState(\"\");\n\n  // Typing indicator\n  const [typingUsers, setTypingUsers] = useState([]);\n  const typingActiveRef = useRef(false);\n  const typingTimeoutRef = useRef(null);\n\n  // Load thread + messages once\n  useEffect(() => {\n    if (!threadId) return;\n    (async () => {\n      setLoading(true);\n      try {\n        const t = await getThread(threadId);\n        const msgs = await getThreadMessages(threadId);\n        setThread(t);\n        setMessages(msgs || []);\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, [threadId]);\n\n  // Typing subscription\n  useEffect(() => {\n    if (!threadId || !user) return;\n    const ref = doc(db, \"threads\", threadId);\n    const unsub = onSnapshot(ref, snap => {\n      if (!snap.exists()) return;\n      const data = snap.data();\n      const typingMap = data.typing || {};\n      const active = Object.entries(typingMap).filter(([uid, on]) => uid !== user.uid && !!on).map(([uid]) => uid);\n      setTypingUsers(active);\n      setThread(prev => ({\n        ...(prev || {}),\n        ...data,\n        id: snap.id\n      }));\n    });\n    return unsub;\n  }, [threadId, user]);\n\n  // Mark messages as read when they load / change\n  useEffect(() => {\n    if (!user || !threadId || messages.length === 0) return;\n    markThreadMessagesRead(threadId, user.uid).catch(err => console.error(\"Failed to mark messages read\", err));\n  }, [messages, threadId, user]);\n  const handleSend = async e => {\n    e.preventDefault();\n    if (!newMessage.trim() || !user) return;\n    setSending(true);\n    try {\n      await sendMessage(threadId, {\n        text: newMessage.trim(),\n        senderId: user.uid,\n        senderName: user.displayName || user.email || \"User\"\n      });\n      setNewMessage(\"\");\n\n      // stop typing on send\n      await setThreadTyping(threadId, user.uid, false);\n      typingActiveRef.current = false;\n      if (typingTimeoutRef.current) {\n        clearTimeout(typingTimeoutRef.current);\n        typingTimeoutRef.current = null;\n      }\n\n      // refresh messages (simple version)\n      const msgs = await getThreadMessages(threadId);\n      setMessages(msgs || []);\n    } catch (err) {\n      console.error(\"Failed to send message\", err);\n    } finally {\n      setSending(false);\n    }\n  };\n\n  // Local typing handler\n  const handleInputChange = e => {\n    const value = e.target.value;\n    setNewMessage(value);\n    if (!user || !threadId) return;\n    if (!typingActiveRef.current) {\n      typingActiveRef.current = true;\n      setThreadTyping(threadId, user.uid, true).catch(console.error);\n    }\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n    }\n    typingTimeoutRef.current = setTimeout(() => {\n      typingActiveRef.current = false;\n      setThreadTyping(threadId, user.uid, false).catch(console.error);\n      typingTimeoutRef.current = null;\n    }, 2000);\n  };\n  const handleBlur = () => {\n    if (!user || !threadId) return;\n    typingActiveRef.current = false;\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n      typingTimeoutRef.current = null;\n    }\n    setThreadTyping(threadId, user.uid, false).catch(console.error);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-3xl mx-auto px-4 py-10\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-500 text-sm\",\n        children: \"Loading conversation\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this);\n  }\n  if (!thread) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-3xl mx-auto px-4 py-10\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-500 text-sm\",\n        children: \"Thread not found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/messages\",\n        className: \"text-blue-600 text-sm hover:underline mt-2 inline-block\",\n        children: \"\\u2190 Back to messages\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this);\n  }\n  const otherParticipants = (thread.participants || []).filter(id => id !== (user === null || user === void 0 ? void 0 : user.uid)) || [];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-3xl mx-auto px-4 py-10 flex flex-col gap-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-2\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/messages\",\n          className: \"text-blue-600 text-xs hover:underline inline-block mb-1\",\n          children: \"\\u2190 Back to messages\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-xl font-semibold text-slate-800\",\n          children: \"Conversation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl shadow p-4 max-h-[60vh] overflow-y-auto space-y-3\",\n      children: [messages.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xs text-gray-500\",\n        children: \"No messages yet. Say hello!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 11\n      }, this), messages.map(m => {\n        const isMine = m.senderId === (user === null || user === void 0 ? void 0 : user.uid);\n        const readBy = Array.isArray(m.readBy) ? m.readBy : [];\n        const allOthersRead = isMine && otherParticipants.length > 0 && otherParticipants.every(id => readBy.includes(id));\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex flex-col ${isMine ? \"items-end\" : \"items-start\"}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `max-w-[75%] rounded-2xl px-3 py-2 text-sm ${isMine ? \"bg-blue-600 text-white rounded-br-sm\" : \"bg-slate-100 text-slate-800 rounded-bl-sm\"}`,\n            children: [!isMine && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-[11px] font-semibold mb-0.5 opacity-80\",\n              children: m.senderName || \"Someone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: m.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 15\n          }, this), allOthersRead && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-1 text-[11px] text-gray-400\",\n            children: \"Seen\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 17\n          }, this)]\n        }, m.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 13\n        }, this);\n      }), typingUsers.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 text-xs text-gray-500 italic\",\n        children: typingUsers.length === 1 ? \"Someone is typing‚Ä¶\" : \"Several people are typing‚Ä¶\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSend,\n      className: \"bg-white rounded-xl shadow p-3 flex items-center gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        rows: 2,\n        value: newMessage,\n        onChange: handleInputChange,\n        onBlur: handleBlur,\n        placeholder: \"Type your message\\u2026\",\n        className: \"flex-1 border rounded-lg px-3 py-2 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: sending || !newMessage.trim(),\n        className: \"inline-flex items-center justify-center px-4 py-2 rounded-full bg-blue-600 text-white text-sm font-semibold hover:bg-blue-700 disabled:opacity-50\",\n        children: sending ? \"Sending‚Ä¶\" : \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 167,\n    columnNumber: 5\n  }, this);\n}\n_s(ViewThread, \"ZFmQ5TU+ICKfSHehcCddLLattvI=\", false, function () {\n  return [useParams, useAuth];\n});\n_c = ViewThread;\nvar _c;\n$RefreshReg$(_c, \"ViewThread\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useParams","Link","useAuth","getThread","getThreadMessages","sendMessage","setThreadTyping","markThreadMessagesRead","db","doc","onSnapshot","jsxDEV","_jsxDEV","ViewThread","_s","threadId","user","thread","setThread","messages","setMessages","loading","setLoading","sending","setSending","newMessage","setNewMessage","typingUsers","setTypingUsers","typingActiveRef","typingTimeoutRef","t","msgs","ref","unsub","snap","exists","data","typingMap","typing","active","Object","entries","filter","uid","on","map","prev","id","length","catch","err","console","error","handleSend","e","preventDefault","trim","text","senderId","senderName","displayName","email","current","clearTimeout","handleInputChange","value","target","setTimeout","handleBlur","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","otherParticipants","participants","m","isMine","readBy","Array","isArray","allOthersRead","every","includes","onSubmit","rows","onChange","onBlur","placeholder","type","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Floyd/Desktop/Websites/HIAWTO/hi-awto-clean/src/pages/ViewThread.jsx"],"sourcesContent":["// src/pages/ViewThread.jsx\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\nimport { useAuth } from \"../firebase/AuthContext.jsx\";\r\nimport {\r\n  getThread,\r\n  getThreadMessages,\r\n  sendMessage,\r\n  setThreadTyping,\r\n  markThreadMessagesRead,\r\n} from \"../firebase/messages.js\";\r\nimport { db } from \"../firebase/config.js\";\r\nimport { doc, onSnapshot } from \"firebase/firestore\";\r\n\r\nexport default function ViewThread() {\r\n  const { threadId } = useParams();\r\n  const { user } = useAuth();\r\n\r\n  const [thread, setThread] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [sending, setSending] = useState(false);\r\n\r\n  const [newMessage, setNewMessage] = useState(\"\");\r\n\r\n  // Typing indicator\r\n  const [typingUsers, setTypingUsers] = useState([]);\r\n  const typingActiveRef = useRef(false);\r\n  const typingTimeoutRef = useRef(null);\r\n\r\n  // Load thread + messages once\r\n  useEffect(() => {\r\n    if (!threadId) return;\r\n\r\n    (async () => {\r\n      setLoading(true);\r\n      try {\r\n        const t = await getThread(threadId);\r\n        const msgs = await getThreadMessages(threadId);\r\n        setThread(t);\r\n        setMessages(msgs || []);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, [threadId]);\r\n\r\n  // Typing subscription\r\n  useEffect(() => {\r\n    if (!threadId || !user) return;\r\n\r\n    const ref = doc(db, \"threads\", threadId);\r\n    const unsub = onSnapshot(ref, (snap) => {\r\n      if (!snap.exists()) return;\r\n      const data = snap.data();\r\n      const typingMap = data.typing || {};\r\n\r\n      const active = Object.entries(typingMap)\r\n        .filter(([uid, on]) => uid !== user.uid && !!on)\r\n        .map(([uid]) => uid);\r\n\r\n      setTypingUsers(active);\r\n      setThread((prev) => ({ ...(prev || {}), ...data, id: snap.id }));\r\n    });\r\n\r\n    return unsub;\r\n  }, [threadId, user]);\r\n\r\n  // Mark messages as read when they load / change\r\n  useEffect(() => {\r\n    if (!user || !threadId || messages.length === 0) return;\r\n\r\n    markThreadMessagesRead(threadId, user.uid).catch((err) =>\r\n      console.error(\"Failed to mark messages read\", err)\r\n    );\r\n  }, [messages, threadId, user]);\r\n\r\n  const handleSend = async (e) => {\r\n    e.preventDefault();\r\n    if (!newMessage.trim() || !user) return;\r\n\r\n    setSending(true);\r\n    try {\r\n      await sendMessage(threadId, {\r\n        text: newMessage.trim(),\r\n        senderId: user.uid,\r\n        senderName: user.displayName || user.email || \"User\",\r\n      });\r\n      setNewMessage(\"\");\r\n\r\n      // stop typing on send\r\n      await setThreadTyping(threadId, user.uid, false);\r\n      typingActiveRef.current = false;\r\n      if (typingTimeoutRef.current) {\r\n        clearTimeout(typingTimeoutRef.current);\r\n        typingTimeoutRef.current = null;\r\n      }\r\n\r\n      // refresh messages (simple version)\r\n      const msgs = await getThreadMessages(threadId);\r\n      setMessages(msgs || []);\r\n    } catch (err) {\r\n      console.error(\"Failed to send message\", err);\r\n    } finally {\r\n      setSending(false);\r\n    }\r\n  };\r\n\r\n  // Local typing handler\r\n  const handleInputChange = (e) => {\r\n    const value = e.target.value;\r\n    setNewMessage(value);\r\n\r\n    if (!user || !threadId) return;\r\n\r\n    if (!typingActiveRef.current) {\r\n      typingActiveRef.current = true;\r\n      setThreadTyping(threadId, user.uid, true).catch(console.error);\r\n    }\r\n\r\n    if (typingTimeoutRef.current) {\r\n      clearTimeout(typingTimeoutRef.current);\r\n    }\r\n    typingTimeoutRef.current = setTimeout(() => {\r\n      typingActiveRef.current = false;\r\n      setThreadTyping(threadId, user.uid, false).catch(console.error);\r\n      typingTimeoutRef.current = null;\r\n    }, 2000);\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    if (!user || !threadId) return;\r\n    typingActiveRef.current = false;\r\n    if (typingTimeoutRef.current) {\r\n      clearTimeout(typingTimeoutRef.current);\r\n      typingTimeoutRef.current = null;\r\n    }\r\n    setThreadTyping(threadId, user.uid, false).catch(console.error);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"max-w-3xl mx-auto px-4 py-10\">\r\n        <p className=\"text-gray-500 text-sm\">Loading conversation‚Ä¶</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!thread) {\r\n    return (\r\n      <div className=\"max-w-3xl mx-auto px-4 py-10\">\r\n        <p className=\"text-gray-500 text-sm\">Thread not found.</p>\r\n        <Link\r\n          to=\"/messages\"\r\n          className=\"text-blue-600 text-sm hover:underline mt-2 inline-block\"\r\n        >\r\n          ‚Üê Back to messages\r\n        </Link>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const otherParticipants =\r\n    (thread.participants || []).filter((id) => id !== user?.uid) || [];\r\n\r\n  return (\r\n    <div className=\"max-w-3xl mx-auto px-4 py-10 flex flex-col gap-4\">\r\n      <div className=\"flex items-center justify-between mb-2\">\r\n        <div>\r\n          <Link\r\n            to=\"/messages\"\r\n            className=\"text-blue-600 text-xs hover:underline inline-block mb-1\"\r\n          >\r\n            ‚Üê Back to messages\r\n          </Link>\r\n          <h1 className=\"text-xl font-semibold text-slate-800\">\r\n            Conversation\r\n          </h1>\r\n        </div>\r\n      </div>\r\n\r\n      {/* MESSAGES */}\r\n      <div className=\"bg-white rounded-xl shadow p-4 max-h-[60vh] overflow-y-auto space-y-3\">\r\n        {messages.length === 0 && (\r\n          <p className=\"text-xs text-gray-500\">No messages yet. Say hello!</p>\r\n        )}\r\n\r\n        {messages.map((m) => {\r\n          const isMine = m.senderId === user?.uid;\r\n          const readBy = Array.isArray(m.readBy) ? m.readBy : [];\r\n          const allOthersRead =\r\n            isMine &&\r\n            otherParticipants.length > 0 &&\r\n            otherParticipants.every((id) => readBy.includes(id));\r\n\r\n          return (\r\n            <div key={m.id} className={`flex flex-col ${isMine ? \"items-end\" : \"items-start\"}`}>\r\n              <div\r\n                className={`max-w-[75%] rounded-2xl px-3 py-2 text-sm ${\r\n                  isMine\r\n                    ? \"bg-blue-600 text-white rounded-br-sm\"\r\n                    : \"bg-slate-100 text-slate-800 rounded-bl-sm\"\r\n                }`}\r\n              >\r\n                {!isMine && (\r\n                  <div className=\"text-[11px] font-semibold mb-0.5 opacity-80\">\r\n                    {m.senderName || \"Someone\"}\r\n                  </div>\r\n                )}\r\n                <div>{m.text}</div>\r\n              </div>\r\n\r\n              {/* üîµ Seen indicator for my messages */}\r\n              {allOthersRead && (\r\n                <div className=\"mt-1 text-[11px] text-gray-400\">\r\n                  Seen\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {/* Typing indicator */}\r\n        {typingUsers.length > 0 && (\r\n          <div className=\"mt-2 text-xs text-gray-500 italic\">\r\n            {typingUsers.length === 1\r\n              ? \"Someone is typing‚Ä¶\"\r\n              : \"Several people are typing‚Ä¶\"}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* COMPOSER */}\r\n      <form\r\n        onSubmit={handleSend}\r\n        className=\"bg-white rounded-xl shadow p-3 flex items-center gap-2\"\r\n      >\r\n        <textarea\r\n          rows={2}\r\n          value={newMessage}\r\n          onChange={handleInputChange}\r\n          onBlur={handleBlur}\r\n          placeholder=\"Type your message‚Ä¶\"\r\n          className=\"flex-1 border rounded-lg px-3 py-2 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500\"\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          disabled={sending || !newMessage.trim()}\r\n          className=\"inline-flex items-center justify-center px-4 py-2 rounded-full bg-blue-600 text-white text-sm font-semibold hover:bg-blue-700 disabled:opacity-50\"\r\n        >\r\n          {sending ? \"Sending‚Ä¶\" : \"Send\"}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}