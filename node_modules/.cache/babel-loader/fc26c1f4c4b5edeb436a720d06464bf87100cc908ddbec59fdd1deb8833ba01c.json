{"ast":null,"code":"// src/firebase/uploadManager.js\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport { storage, auth } from \"./config\";\n\n// Generic single-file upload\nexport async function uploadFile(file, pathPrefix = \"uploads\") {\n  if (!file) return null;\n  const user = auth.currentUser;\n  const uid = user ? user.uid : \"anon\";\n  const fileRef = ref(storage, `${pathPrefix}/${uid}/${Date.now()}-${file.name}`);\n  await uploadBytes(fileRef, file);\n  const url = await getDownloadURL(fileRef);\n  return {\n    path: fileRef.fullPath,\n    url\n  };\n}\n\n// Generic multiple-file helper\nexport async function uploadMultipleFiles(files, pathPrefix = \"uploads\") {\n  if (!files || files.length === 0) return [];\n  const uploads = await Promise.all(files.map(file => uploadFile(file, pathPrefix)));\n  return uploads.filter(Boolean);\n}\n\n// -----------------------------------------------------\n// Listing-specific helper\n// -----------------------------------------------------\nexport async function uploadListingImages(files) {\n  const uploads = await uploadMultipleFiles(files, \"listing-images\");\n  return uploads.map(u => u.url);\n}","map":{"version":3,"names":["ref","uploadBytes","getDownloadURL","storage","auth","uploadFile","file","pathPrefix","user","currentUser","uid","fileRef","Date","now","name","url","path","fullPath","uploadMultipleFiles","files","length","uploads","Promise","all","map","filter","Boolean","uploadListingImages","u"],"sources":["C:/Users/Floyd/Desktop/Websites/HIAWTO/hi-awto-clean/src/firebase/uploadManager.js"],"sourcesContent":["// src/firebase/uploadManager.js\r\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\r\nimport { storage, auth } from \"./config\";\r\n\r\n// Generic single-file upload\r\nexport async function uploadFile(file, pathPrefix = \"uploads\") {\r\n  if (!file) return null;\r\n\r\n  const user = auth.currentUser;\r\n  const uid = user ? user.uid : \"anon\";\r\n  const fileRef = ref(\r\n    storage,\r\n    `${pathPrefix}/${uid}/${Date.now()}-${file.name}`\r\n  );\r\n\r\n  await uploadBytes(fileRef, file);\r\n  const url = await getDownloadURL(fileRef);\r\n  return { path: fileRef.fullPath, url };\r\n}\r\n\r\n// Generic multiple-file helper\r\nexport async function uploadMultipleFiles(files, pathPrefix = \"uploads\") {\r\n  if (!files || files.length === 0) return [];\r\n  const uploads = await Promise.all(\r\n    files.map((file) => uploadFile(file, pathPrefix))\r\n  );\r\n  return uploads.filter(Boolean);\r\n}\r\n\r\n// -----------------------------------------------------\r\n// Listing-specific helper\r\n// -----------------------------------------------------\r\nexport async function uploadListingImages(files) {\r\n  const uploads = await uploadMultipleFiles(files, \"listing-images\");\r\n  return uploads.map((u) => u.url);\r\n}\r\n"],"mappings":"AAAA;AACA,SAASA,GAAG,EAAEC,WAAW,EAAEC,cAAc,QAAQ,kBAAkB;AACnE,SAASC,OAAO,EAAEC,IAAI,QAAQ,UAAU;;AAExC;AACA,OAAO,eAAeC,UAAUA,CAACC,IAAI,EAAEC,UAAU,GAAG,SAAS,EAAE;EAC7D,IAAI,CAACD,IAAI,EAAE,OAAO,IAAI;EAEtB,MAAME,IAAI,GAAGJ,IAAI,CAACK,WAAW;EAC7B,MAAMC,GAAG,GAAGF,IAAI,GAAGA,IAAI,CAACE,GAAG,GAAG,MAAM;EACpC,MAAMC,OAAO,GAAGX,GAAG,CACjBG,OAAO,EACP,GAAGI,UAAU,IAAIG,GAAG,IAAIE,IAAI,CAACC,GAAG,CAAC,CAAC,IAAIP,IAAI,CAACQ,IAAI,EACjD,CAAC;EAED,MAAMb,WAAW,CAACU,OAAO,EAAEL,IAAI,CAAC;EAChC,MAAMS,GAAG,GAAG,MAAMb,cAAc,CAACS,OAAO,CAAC;EACzC,OAAO;IAAEK,IAAI,EAAEL,OAAO,CAACM,QAAQ;IAAEF;EAAI,CAAC;AACxC;;AAEA;AACA,OAAO,eAAeG,mBAAmBA,CAACC,KAAK,EAAEZ,UAAU,GAAG,SAAS,EAAE;EACvE,IAAI,CAACY,KAAK,IAAIA,KAAK,CAACC,MAAM,KAAK,CAAC,EAAE,OAAO,EAAE;EAC3C,MAAMC,OAAO,GAAG,MAAMC,OAAO,CAACC,GAAG,CAC/BJ,KAAK,CAACK,GAAG,CAAElB,IAAI,IAAKD,UAAU,CAACC,IAAI,EAAEC,UAAU,CAAC,CAClD,CAAC;EACD,OAAOc,OAAO,CAACI,MAAM,CAACC,OAAO,CAAC;AAChC;;AAEA;AACA;AACA;AACA,OAAO,eAAeC,mBAAmBA,CAACR,KAAK,EAAE;EAC/C,MAAME,OAAO,GAAG,MAAMH,mBAAmB,CAACC,KAAK,EAAE,gBAAgB,CAAC;EAClE,OAAOE,OAAO,CAACG,GAAG,CAAEI,CAAC,IAAKA,CAAC,CAACb,GAAG,CAAC;AAClC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}