{"ast":null,"code":"// src/firebase/listings.js\nimport { collection, doc, addDoc, getDoc, getDocs, updateDoc, deleteDoc, query, where, orderBy, serverTimestamp } from \"firebase/firestore\";\nimport { db } from \"./config\";\n\n// -------------------------------------------------\n// CREATE LISTING\n// -------------------------------------------------\nexport async function createListing(data) {\n  const ref = await addDoc(collection(db, \"listings\"), {\n    ...data,\n    createdAt: serverTimestamp(),\n    updatedAt: serverTimestamp(),\n    approved: false // admin moderation\n  });\n  return ref.id;\n}\n\n// -------------------------------------------------\n// GET ALL LISTINGS (Public Marketplace Search)\n// -------------------------------------------------\nexport async function getAllListings() {\n  const q = query(collection(db, \"listings\"), where(\"approved\", \"==\", true), orderBy(\"createdAt\", \"desc\"));\n  const snap = await getDocs(q);\n  return snap.docs.map(d => ({\n    id: d.id,\n    ...d.data()\n  }));\n}\n\n// -------------------------------------------------\n// GET LISTING BY ID\n// -------------------------------------------------\nexport async function getListingById(id) {\n  const ref = doc(db, \"listings\", id);\n  const snap = await getDoc(ref);\n  return snap.exists() ? {\n    id: snap.id,\n    ...snap.data()\n  } : null;\n}\n\n// -------------------------------------------------\n// GET LISTINGS FOR CURRENT USER\n// (My Listings – dashboard)\n// -------------------------------------------------\nexport async function getMyListings(userId) {\n  const q = query(collection(db, \"listings\"), where(\"owner\", \"==\", userId), orderBy(\"createdAt\", \"desc\"));\n  const snap = await getDocs(q);\n  return snap.docs.map(d => ({\n    id: d.id,\n    ...d.data()\n  }));\n}\n\n// -------------------------------------------------\n// ADMIN: GET ALL LISTINGS (approved + pending)\n// -------------------------------------------------\nexport async function adminGetAllListings() {\n  const q = query(collection(db, \"listings\"), orderBy(\"createdAt\", \"desc\"));\n  const snap = await getDocs(q);\n  return snap.docs.map(d => ({\n    id: d.id,\n    ...d.data()\n  }));\n}\n\n// -------------------------------------------------\n// UPDATE LISTING (edit, approve, deny, etc.)\n// -------------------------------------------------\nexport async function updateListing(id, data) {\n  const ref = doc(db, \"listings\", id);\n  await updateDoc(ref, {\n    ...data,\n    updatedAt: serverTimestamp()\n  });\n}\n\n// -------------------------------------------------\n// DELETE LISTING\n// -------------------------------------------------\nexport async function deleteListing(id) {\n  await deleteDoc(doc(db, \"listings\", id));\n}","map":{"version":3,"names":["collection","doc","addDoc","getDoc","getDocs","updateDoc","deleteDoc","query","where","orderBy","serverTimestamp","db","createListing","data","ref","createdAt","updatedAt","approved","id","getAllListings","q","snap","docs","map","d","getListingById","exists","getMyListings","userId","adminGetAllListings","updateListing","deleteListing"],"sources":["C:/Users/Floyd/Desktop/Websites/HIAWTO/hi-awto-clean/src/firebase/listings.js"],"sourcesContent":["// src/firebase/listings.js\r\nimport {\r\n  collection,\r\n  doc,\r\n  addDoc,\r\n  getDoc,\r\n  getDocs,\r\n  updateDoc,\r\n  deleteDoc,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"./config\";\r\n\r\n// -------------------------------------------------\r\n// CREATE LISTING\r\n// -------------------------------------------------\r\nexport async function createListing(data) {\r\n  const ref = await addDoc(collection(db, \"listings\"), {\r\n    ...data,\r\n    createdAt: serverTimestamp(),\r\n    updatedAt: serverTimestamp(),\r\n    approved: false, // admin moderation\r\n  });\r\n  return ref.id;\r\n}\r\n\r\n// -------------------------------------------------\r\n// GET ALL LISTINGS (Public Marketplace Search)\r\n// -------------------------------------------------\r\nexport async function getAllListings() {\r\n  const q = query(\r\n    collection(db, \"listings\"),\r\n    where(\"approved\", \"==\", true),\r\n    orderBy(\"createdAt\", \"desc\")\r\n  );\r\n\r\n  const snap = await getDocs(q);\r\n  return snap.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n}\r\n\r\n// -------------------------------------------------\r\n// GET LISTING BY ID\r\n// -------------------------------------------------\r\nexport async function getListingById(id) {\r\n  const ref = doc(db, \"listings\", id);\r\n  const snap = await getDoc(ref);\r\n  return snap.exists() ? { id: snap.id, ...snap.data() } : null;\r\n}\r\n\r\n// -------------------------------------------------\r\n// GET LISTINGS FOR CURRENT USER\r\n// (My Listings – dashboard)\r\n// -------------------------------------------------\r\nexport async function getMyListings(userId) {\r\n  const q = query(\r\n    collection(db, \"listings\"),\r\n    where(\"owner\", \"==\", userId),\r\n    orderBy(\"createdAt\", \"desc\")\r\n  );\r\n\r\n  const snap = await getDocs(q);\r\n  return snap.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n}\r\n\r\n// -------------------------------------------------\r\n// ADMIN: GET ALL LISTINGS (approved + pending)\r\n// -------------------------------------------------\r\nexport async function adminGetAllListings() {\r\n  const q = query(\r\n    collection(db, \"listings\"),\r\n    orderBy(\"createdAt\", \"desc\")\r\n  );\r\n\r\n  const snap = await getDocs(q);\r\n  return snap.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n}\r\n\r\n// -------------------------------------------------\r\n// UPDATE LISTING (edit, approve, deny, etc.)\r\n// -------------------------------------------------\r\nexport async function updateListing(id, data) {\r\n  const ref = doc(db, \"listings\", id);\r\n  await updateDoc(ref, {\r\n    ...data,\r\n    updatedAt: serverTimestamp(),\r\n  });\r\n}\r\n\r\n// -------------------------------------------------\r\n// DELETE LISTING\r\n// -------------------------------------------------\r\nexport async function deleteListing(id) {\r\n  await deleteDoc(doc(db, \"listings\", id));\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}