*** Begin Patch
*** Add File: client/src/components/ListingManager.jsx
+import React, { useEffect, useState } from "react";
+import { collection, getDocs, doc, deleteDoc } from "firebase/firestore";
+import { db } from "../firebase";
+import ListingForm from "./ListingForm";
+import useAuth from "../hooks/useAuth";
+
+export default function ListingManager() {
+  const { user } = useAuth();
+  const [listings, setListings] = useState([]);
+  const [loading, setLoading] = useState(true);
+  const [editing, setEditing] = useState(null);
+  const [showForm, setShowForm] = useState(false);
+
+  useEffect(() => {
+    if (!user) return;
+    fetchListings();
+    // eslint-disable-next-line react-hooks/exhaustive-deps
+  }, [user]);
+
+  const fetchListings = async () => {
+    setLoading(true);
+    try {
+      const snap = await getDocs(collection(db, "listings"));
+      const list = snap.docs.map((d) => ({ id: d.id, ...d.data() }));
+      list.sort((a, b) => {
+        const ta = a.createdAt ? (a.createdAt.seconds || 0) : 0;
+        const tb = b.createdAt ? (b.createdAt.seconds || 0) : 0;
+        return tb - ta;
+      });
+      setListings(list);
+    } catch (err) {
+      console.error("fetchListings error", err);
+    } finally {
+      setLoading(false);
+    }
+  };
+
+  const handleEdit = (listing) => {
+    setEditing(listing);
+    setShowForm(true);
+    window.scrollTo({ top: 0, behavior: "smooth" });
+  };
+
+  const handleDelete = async (id) => {
+    if (!window.confirm("Delete listing? This cannot be undone.")) return;
+    try {
+      await deleteDoc(doc(db, "listings", id));
+      setListings((prev) => prev.filter((l) => l.id !== id));
+    } catch (err) {
+      console.error("delete listing err", err);
+      alert("Delete failed. See console.");
+    }
+  };
+
+  const handleSaved = () => {
+    setShowForm(false);
+    setEditing(null);
+    fetchListings();
+  };
+
+  if (!user) return <p className="p-6">Please sign in to manage listings.</p>;
+
+  return (
+    <div className="p-6">
+      <div className="flex items-center justify-between mb-4">
+        <h2 className="text-2xl font-semibold">Listing Manager</h2>
+        <div>
+          <button
+            onClick={() => { setEditing(null); setShowForm((s) => !s); window.scrollTo({ top: 0, behavior: "smooth" }); }}
+            className="bg-blue-600 text-white px-4 py-2 rounded-lg"
+          >
+            {showForm ? "Close" : "Add Listing"}
+          </button>
+        </div>
+      </div>
+
+      {showForm && (
+        <div className="mb-6">
+          <ListingForm listing={editing} onSaved={handleSaved} onCancel={() => { setShowForm(false); setEditing(null); }} />
+        </div>
+      )}
+
+      {loading ? (
+        <p>Loading listings...</p>
+      ) : listings.length === 0 ? (
+        <p>No listings yet.</p>
+      ) : (
+        <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
+          {listings.map((l) => (
+            <div key={l.id} className="border rounded-lg p-3 bg-white shadow">
+              <img
+                src={l.photos?.[0] || "/placeholder.jpg"}
+                alt={l.address || "Listing"}
+                className="h-40 w-full object-cover rounded-md mb-2"
+                loading="lazy"
+              />
+              <h3 className="font-bold">{l.address}</h3>
+              <p className="text-sm text-gray-600">{l.city}, {l.state}</p>
+              <p className="mt-1"><strong>Rent:</strong> ${Number(l.rent || 0).toLocaleString()}</p>
+              <p><strong>Price:</strong> ${Number(l.price || 0).toLocaleString()}</p>
+              <div className="flex gap-2 mt-3">
+                <button onClick={() => handleEdit(l)} className="px-3 py-1 bg-yellow-500 text-white rounded">Edit</button>
+                <button onClick={() => handleDelete(l.id)} className="px-3 py-1 bg-red-600 text-white rounded">Delete</button>
+              </div>
+            </div>
+          ))}
+        </div>
+      )}
+    </div>
+  );
+}
+
*** Add File: client/src/components/ListingForm.jsx
+import React, { useEffect, useState } from "react";
+import { addDoc, collection, updateDoc, doc, serverTimestamp } from "firebase/firestore";
+import { db, storage } from "../firebase";
+import ImageUploader from "./ImageUploader";
+import { ref, deleteObject } from "firebase/storage";
+
+function deleteImageFromStorage(path) {
+  if (!path) return Promise.resolve();
+  try {
+    const storageRef = ref(storage, path);
+    return deleteObject(storageRef);
+  } catch (err) {
+    console.warn("deleteImageFromStorage failed", err);
+    return Promise.resolve();
+  }
+}
+
+export default function ListingForm({ listing = null, onSaved = () => {}, onCancel = () => {} }) {
+  const [form, setForm] = useState({
+    address: "",
+    city: "",
+    state: "",
+    zip: "",
+    rent: "",
+    price: "",
+    bedrooms: "",
+    bathrooms: "",
+    terms: "",
+    photos: [],
+    thumbnails: [],
+    storagePaths: [], // parallel array of original file paths in storage
+    thumbPaths: [],
+  });
+  const [saving, setSaving] = useState(false);
+
+  useEffect(() => {
+    if (listing) {
+      setForm({
+        address: listing.address || "",
+        city: listing.city || "",
+        state: listing.state || "",
+        zip: listing.zip || "",
+        rent: listing.rent || "",
+        price: listing.price || "",
+        bedrooms: listing.bedrooms || "",
+        bathrooms: listing.bathrooms || "",
+        terms: listing.terms || "",
+        photos: listing.photos || [],
+        thumbnails: listing.thumbnails || [],
+        storagePaths: listing.storagePaths || [],
+        thumbPaths: listing.thumbPaths || [],
+      });
+    }
+  }, [listing]);
+
+  const handleChange = (e) => setForm({ ...form, [e.target.name]: e.target.value });
+
+  const handleUploaded = (files) => {
+    // files: [{ url, thumbnailUrl, path, thumbPath }]
+    const newPhotos = files.map((f) => f.url);
+    const newThumbs = files.map((f) => f.thumbnailUrl);
+    const newPaths = files.map((f) => f.path);
+    const newThumbPaths = files.map((f) => f.thumbPath);
+    setForm((prev) => ({
+      ...prev,
+      photos: [...(prev.photos || []), ...newPhotos],
+      thumbnails: [...(prev.thumbnails || []), ...newThumbs],
+      storagePaths: [...(prev.storagePaths || []), ...newPaths],
+      thumbPaths: [...(prev.thumbPaths || []), ...newThumbPaths],
+    }));
+  };
+
+  const handleRemovePhoto = async (index) => {
+    const keep = window.confirm("Remove photo from listing? This will also delete the file from Storage.");
+    if (!keep) return;
+    const path = form.storagePaths?.[index];
+    const thumb = form.thumbPaths?.[index];
+    try {
+      if (path) await deleteImageFromStorage(path);
+      if (thumb) await deleteImageFromStorage(thumb);
+    } catch (err) {
+      console.warn("delete error", err);
+    }
+    setForm((prev) => {
+      const photos = [...prev.photos];
+      const thumbnails = [...prev.thumbnails];
+      const storagePaths = [...(prev.storagePaths || [])];
+      const thumbPaths = [...(prev.thumbPaths || [])];
+      photos.splice(index, 1);
+      thumbnails.splice(index, 1);
+      storagePaths.splice(index, 1);
+      thumbPaths.splice(index, 1);
+      return { ...prev, photos, thumbnails, storagePaths, thumbPaths };
+    });
+  };
+
+  // Drag & drop reorder handlers
+  const onDragStart = (e, idx) => { e.dataTransfer.setData('text/plain', idx); };
+  const onDrop = (e, idx) => {
+    e.preventDefault();
+    const from = Number(e.dataTransfer.getData('text/plain'));
+    if (Number.isNaN(from)) return;
+    setForm((prev) => {
+      const photos = [...prev.photos];
+      const thumbnails = [...prev.thumbnails];
+      const storagePaths = [...(prev.storagePaths || [])];
+      const thumbPaths = [...(prev.thumbPaths || [])];
+      const [p] = photos.splice(from, 1);
+      const [t] = thumbnails.splice(from, 1);
+      const [sp] = storagePaths.splice(from, 1);
+      const [tp] = thumbPaths.splice(from, 1);
+      photos.splice(idx, 0, p);
+      thumbnails.splice(idx, 0, t);
+      storagePaths.splice(idx, 0, sp);
+      thumbPaths.splice(idx, 0, tp);
+      return { ...prev, photos, thumbnails, storagePaths, thumbPaths };
+    });
+  };
+
+  const onDragOver = (e) => e.preventDefault();
+
+  const handleSubmit = async (e) => {
+    e.preventDefault();
+    setSaving(true);
+    try {
+      const payload = {
+        ...form,
+        rent: form.rent ? Number(form.rent) : null,
+        price: form.price ? Number(form.price) : null,
+        bedrooms: form.bedrooms ? Number(form.bedrooms) : null,
+        bathrooms: form.bathrooms ? Number(form.bathrooms) : null,
+      };
+      // strip local-only arrays if necessary
+      payload.photos = payload.photos || [];
+      payload.thumbnails = payload.thumbnails || [];
+      payload.storagePaths = payload.storagePaths || [];
+      payload.thumbPaths = payload.thumbPaths || [];
+
+      if (listing && listing.id) {
+        await updateDoc(doc(db, "listings", listing.id), { ...payload, updatedAt: serverTimestamp() });
+      } else {
+        await addDoc(collection(db, "listings"), { ...payload, createdAt: serverTimestamp() });
+      }
+      onSaved();
+    } catch (err) {
+      console.error("save listing err", err);
+      alert("Save failed; see console.");
+    } finally {
+      setSaving(false);
+    }
+  };
+
+  return (
+    <form onSubmit={handleSubmit} className="bg-white p-4 rounded-lg shadow">
+      <div className="grid md:grid-cols-2 gap-3">
+        <input name="address" value={form.address} onChange={handleChange} placeholder="Address" className="p-2 border rounded" required />
+        <input name="city" value={form.city} onChange={handleChange} placeholder="City" className="p-2 border rounded" />
+        <input name="state" value={form.state} onChange={handleChange} placeholder="State" className="p-2 border rounded" />
+        <input name="zip" value={form.zip} onChange={handleChange} placeholder="ZIP" className="p-2 border rounded" />
+        <input name="rent" value={form.rent} onChange={handleChange} placeholder="Monthly Rent" className="p-2 border rounded" />
+        <input name="price" value={form.price} onChange={handleChange} placeholder="Lease-to-own Price" className="p-2 border rounded" />
+        <input name="bedrooms" value={form.bedrooms} onChange={handleChange} placeholder="Bedrooms" className="p-2 border rounded" />
+        <input name="bathrooms" value={form.bathrooms} onChange={handleChange} placeholder="Bathrooms" className="p-2 border rounded" />
+      </div>
+
+      <textarea name="terms" value={form.terms} onChange={handleChange} placeholder="Lease terms / description" className="w-full p-2 border rounded mt-3" rows={4}></textarea>
+
+      <div className="mt-3">
+        <ImageUploader onUploaded={handleUploaded} folderPrefix={`listing_photos/${Date.now()}`} />
+      </div>
+
+      {form.photos?.length > 0 && (
+        <div className="mt-3 grid grid-cols-3 gap-2">
+          {form.photos.map((p, i) => (
+            <div key={i} className="relative" draggable onDragStart={(e) => onDragStart(e, i)} onDragOver={onDragOver} onDrop={(e) => onDrop(e, i)}>
+              <img src={form.thumbnails?.[i] || p} alt={`preview-${i}`} className="w-full h-28 object-cover rounded" />
+              <div className="absolute left-1 top-1 flex gap-1">
+                <button type="button" onClick={() => handleRemovePhoto(i)} className="bg-red-600 text-white rounded px-2">X</button>
+              </div>
+              <div className="absolute right-1 bottom-1 bg-white text-xs px-2 rounded">Drag</div>
+            </div>
+          ))}
+        </div>
+      )}
+
+      <div className="flex gap-3 mt-4">
+        <button type="submit" disabled={saving} className="bg-green-600 text-white px-4 py-2 rounded">
+          {saving ? "Saving..." : listing ? "Update Listing" : "Create Listing"}
+        </button>
+        <button type="button" onClick={onCancel} className="bg-gray-400 text-white px-4 py-2 rounded">Cancel</button>
+      </div>
+    </form>
+  );
+}
+
*** Add File: client/src/components/ImageUploader.jsx
+import React, { useRef, useState } from "react";
+import { storage } from "../firebase";
+import { ref, uploadBytesResumable, getDownloadURL } from "firebase/storage";
+import { createThumbnailBlob } from "../utils/imageUtils";
+
+export default function ImageUploader({ onUploaded = () => {}, folderPrefix = "listing_photos" }) {
+  const inputRef = useRef(null);
+  const [progresses, setProgresses] = useState([]);
+
+  const handleFiles = async (e) => {
+    const files = Array.from(e.target.files || []);
+    if (files.length === 0) return;
+    const uploaded = [];
+
+    for (const file of files) {
+      const thumbBlob = await createThumbnailBlob(file, 480);
+      const baseName = file.name.replace(/\s+/g, "_") + "-" + Date.now();
+      const filename = `${folderPrefix}/${baseName}`;
+      const fileRef = ref(storage, filename);
+      const uploadTask = uploadBytesResumable(fileRef, file);
+
+      await new Promise((resolve, reject) => {
+        uploadTask.on(
+          "state_changed",
+          (snapshot) => {
+            const percent = Math.round((snapshot.bytesTransferred / snapshot.totalBytes) * 100);
+            setProgresses((p) => {
+              const others = p.filter((x) => x.name !== filename);
+              return [...others, { name: filename, percent }];
+            });
+          },
+          (err) => reject(err),
+          async () => {
+            const url = await getDownloadURL(uploadTask.snapshot.ref);
+            const thumbPath = `${folderPrefix}/thumbs/${baseName}`;
+            const thumbRef = ref(storage, thumbPath);
+            const thumbTask = uploadBytesResumable(thumbRef, thumbBlob);
+            thumbTask.on(
+              "state_changed",
+              (s) => {
+                const percent = Math.round((s.bytesTransferred / s.totalBytes) * 100);
+                setProgresses((p) => {
+                  const others = p.filter((x) => x.name !== thumbPath && x.name !== filename);
+                  return [...others, { name: thumbPath, percent }];
+                });
+              },
+              (err) => reject(err),
+              async () => {
+                const thumbnailUrl = await getDownloadURL(thumbTask.snapshot.ref);
+                uploaded.push({ url, thumbnailUrl, path: filename, thumbPath });
+                setProgresses((p) => p.filter((x) => x.name !== filename && x.name !== thumbPath));
+                resolve();
+              }
+            );
+          }
+        );
+      });
+    }
+    if (uploaded.length) onUploaded(uploaded);
+    if (inputRef.current) inputRef.current.value = "";
+  };
+
+  return (
+    <div>
+      <input ref={inputRef} type="file" accept="image/*" multiple onChange={handleFiles} />
+      <div className="mt-2">
+        {progresses.map((p) => (
+          <div key={p.name} className="mb-2">
+            <div className="text-sm">{p.name.split("/").pop()}</div>
+            <div className="w-full bg-gray-200 rounded h-2">
+              <div style={{ width: `${p.percent}%` }} className="bg-blue-600 h-2 rounded" />
+            </div>
+          </div>
+        ))}
+      </div>
+    </div>
+  );
+}
+
*** Add File: client/src/utils/imageUtils.js
+export async function createThumbnailBlob(file, maxWidth = 600) {
+  return new Promise((resolve, reject) => {
+    const img = new Image();
+    const reader = new FileReader();
+    reader.onload = (ev) => {
+      img.onload = () => {
+        const scale = Math.min(1, maxWidth / img.width);
+        const w = Math.round(img.width * scale);
+        const h = Math.round(img.height * scale);
+        const canvas = document.createElement("canvas");
+        canvas.width = w;
+        canvas.height = h;
+        const ctx = canvas.getContext("2d");
+        ctx.drawImage(img, 0, 0, w, h);
+        canvas.toBlob(
+          (blob) => {
+            if (!blob) return reject(new Error("Canvas is empty"));
+            resolve(blob);
+          },
+          "image/jpeg",
+          0.75
+        );
+      };
+      img.onerror = (err) => reject(err);
+      img.src = ev.target.result;
+    };
+    reader.onerror = (err) => reject(err);
+    reader.readAsDataURL(file);
+  });
+}
+
*** Add File: client/src/components/AdminProtected.jsx
+import React from "react";
+import { Navigate } from "react-router-dom";
+import useAuth from "../hooks/useAuth";
+
+export default function AdminProtected({ children }) {
+  const { user } = useAuth();
+  if (!user) return <Navigate to="/login" replace />;
+  return children;
+}
+
*** Add File: client/src/firebase.js
+import { initializeApp } from "firebase/app";
+import { getFirestore } from "firebase/firestore";
+import { getAuth } from "firebase/auth";
+import { getStorage } from "firebase/storage";
+
+const firebaseConfig = {
+  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,
+  authDomain: "hi-awto.firebaseapp.com",
+  projectId: "hi-awto",
+  storageBucket: "hi-awto.appspot.com",
+  messagingSenderId: "847688831723",
+  appId: process.env.REACT_APP_FIREBASE_APPID || "1:847688831723:web:xxxxxxxx",
+};
+
+const app = initializeApp(firebaseConfig);
+export const db = getFirestore(app);
+export const auth = getAuth(app);
+export const storage = getStorage(app);
+
*** End Patch
